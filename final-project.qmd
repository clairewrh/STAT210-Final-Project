---
title: "Final Project"
authors: Claire Wang & Xeno Hu
---
## Introduction

This section includes an introduction to the project motivation, data, and research question. Describe the data and definitions of key variables. It should also include some exploratory data analysis. All of the EDA won’t fit in the paper, so focus on the EDA for the response variable and a few other interesting variables and relationships.

Project motivation: The goal of this report is to enhance the scientific community's understanding of CVDs and their associated risk factors. To achieve this, we investigate the development of CVDs in individuals, taking into account various predictors such as chest pain type, blood pressure, cholesterol levels, fasting blood sugar, and resting electrocardiographic measurement. Furthermore, we explore possible correlations between these predictors and the incidence of CVDs. Ultimately, the findings of this project will contribute to a better understanding and prevention of this critical disease, benefiting both individuals and populations.

Data: This dataset contains information about patients who were suspected to have heart disease. The dataset contains 1026 patients, each described by 14 features. These features include demographic information such as age, sex, and chest pain type, clinical variables such as blood pressure, cholesterol levels, and heart rate, and laboratory variables such as results from electrocardiogram (ECG) tests and exercise stress tests. It was formed by researchers at the Cleveland Clinic Foundation in 1988 by compiling data from medical records from Cleveland, Hungary, Switzerland, and Long Beach V. The "target" variable is what we are trying to predict; it is binary, indicating the presence or absence of heart disease with 0 and 1, respectively.

Research question: 
The Grading criteria
The research question and motivation are clearly stated in the introduction, including citations for the data source and any external research. The data are clearly described, including a description about how the data were originally collected and a concise definition of the variables relevant to understanding the report. The data cleaning process is clearly described, including any decisions made in the process (e.g., creating new variables, removing observations, etc.) The explanatory data analysis helps the reader better understand the observations in the data along with interesting and relevant relationships between the variables. It incorporates appropriate visualizations and summary statistics.

## Methodology
This section includes a brief description of your modeling process. Explain the reasoning for the type of model you’re fitting, predictor variables considered for the model including any interactions. Additionally, show how you arrived at the final model by describing the model selection process, interactions considered, variable transformations (if needed), assessment of conditions and diagnostics, and any other relevant considerations that were part of the model fitting process.

Grading criteria
The analysis steps are appropriate for the data and research question. The group used a thorough and careful approach to select the final model; the approach is clearly described in the report. The model selection process was reasonable, and addressed any violations in model conditions were discussed and/or fixed. The model conditions and diagnostics are thoroughly and accurately assessed for their model. If violations of model conditions are still present, there was a reasonable attempt to address the violations based on the course content.

```{r loading packages and data, messages = F, warning = F}
library(tidyverse)
library(tidymodels)
library(glmnet)
library(MASS)
library(leaps)
heart = read_csv("heart.csv")
```

Using LASSO for variable selection
```{r var-select, message = F, warning = F}
y <- heart$target
x <- model.matrix(target ~ ., data = heart)
m_lasso_cv <- cv.glmnet(x, y, alpha = 1)
best_lambda <- m_lasso_cv$lambda.min
m_best <- glmnet(x, y, alpha = 1, lambda = best_lambda)
m_best$beta
summary(m_best)
```
Using stepwise method for variable selection
```{r stepwise}
m_none <- lm(target ~ 1, data = heart)
m_all <- lm(target ~ ., 
            data = heart)
stepAIC(m_none, 
        scope = list(lower = m_none, upper = m_all),
        data = heart, direction = "both")
```

## Results
This is where you will output the final model with any relevant model fit statistics. Describe the key results from the model. The goal is not to interpret every single variable in the model but rather to show that you are proficient in using the model output to address the research questions, using the interpretations to support your conclusions. Focus on the variables that help you answer the research question and that provide relevant context for the reader.

Grading criteria
The model fit is clearly assessed, and interesting findings from the model are clearly described. Interpretations of model coefficients are used to support the key findings and conclusions, rather than merely listing the interpretation of every model coefficient. If the primary modeling objective is prediction, the model’s predictive power is thoroughly assessed.

## Discussion
In this section you’ll include a summary of what you have learned about your research question along with statistical arguments supporting your conclusions. In addition, discuss the limitations of your analysis and provide suggestions on ways the analysis could be improved. Any potential issues pertaining to the reliability and validity of your data and appropriateness of the statistical analysis should also be discussed here. Lastly, this section will include ideas for future work.

Grading criteria
Overall conclusions from analysis are clearly described, and the model results are put into the larger context of the subject matter and original research question. There is thoughtful consideration of potential limitations of the data and/or analysis, and ideas for future work are clearly described.